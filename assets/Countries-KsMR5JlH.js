import{c as z,j as e,a as R,D as rs,b as as,d as ns,e as Ee,f as Te,g as _e,B as C,h as Me,S as f,i as ls,k as W,l as ie,m as O,r as i,X as os,n as is,o as cs,p as ds,q as hs,s as us,t as gs,v as xs,w as F,x as ve,y as K,z as ce,C as ps,E as fs,G as bs,R as ms,H as Le,u as ys,J as ks,K as js,M as vs}from"./index-gZinIeTx.js";import{I as $}from"./input-DbvIWgGl.js";import{A as de}from"./alert-manager-DeQmj-6E.js";import{g as ws}from"./countries-BvOdm3TP.js";import{P as Ns}from"./PegeHeader-JVLCSEXN.js";const Cs=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ss=z("chevron-left",Cs);const Es=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ts=z("chevron-up",Es);const _s=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],Ms=z("chevrons-left",_s);const Ls=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],Ds=z("chevrons-right",Ls);const zs=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Is=z("funnel",zs);const Rs=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],De=z("menu",Rs);const Ps=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ze=z("plus",Ps);const Os=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],As=z("refresh-ccw",Os);const Vs=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ie=z("square-pen",Vs);const Fs=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Re=z("trash-2",Fs);const $s=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Gs=z("trash",$s);const Us=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bs=z("user",Us);function Ws({className:a,...n}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:R("w-full caption-bottom text-sm",a),...n})})}function qs({className:a,...n}){return e.jsx("thead",{"data-slot":"table-header",className:R("[&_tr]:border-b",a),...n})}function Hs({className:a,...n}){return e.jsx("tbody",{"data-slot":"table-body",className:R("[&_tr:last-child]:border-0",a),...n})}function we({className:a,...n}){return e.jsx("tr",{"data-slot":"table-row",className:R("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...n})}function Ne({className:a,...n}){return e.jsx("th",{"data-slot":"table-head",className:R("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...n})}function Ce({className:a,...n}){return e.jsx("td",{"data-slot":"table-cell",className:R("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...n})}function Xs({columns:a,onToggleColumn:n}){return e.jsxs(rs,{children:[e.jsx(as,{children:"Columns"}),e.jsx(ns,{children:a.map(l=>e.jsx(Ee,{checked:l.visible,onCheckedChange:()=>n(l.key),onSelect:y=>y.preventDefault(),children:l.label},l.key))})]})}const N={SELECT_ALL:"select-all",CLEAR_ALL:"clear-all",TOGGLE_COLUMN_PREFIX:"toggle-column-",PAGE_SIZE_PREFIX:"page-size-",INVERT_SELECTION:"invert-selection",CHOOSE_SELECTION:"show_only_selection",NEW:"new",DELETE:"delete",EDIT:"edit"},Pe="separator";function Ks({itemsCount:a=0,selected:n=new Set,onAction:l,pageSize:y=10,menuItems:u=[],columns:j}){return console.log("tableMenu -> Render"),e.jsxs(Te,{children:[e.jsx(_e,{asChild:!0,children:e.jsxs(C,{variant:"outline",className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"Abrir menú"}),e.jsx(De,{})]})}),e.jsxs(Me,{className:"w-56",align:"end",alignOffset:0,children:[e.jsxs(f,{when:n.size>0,children:[e.jsxs(ls,{children:[n.size," elementos seleccionados"]}),e.jsx(W,{})]}),e.jsxs(ie,{children:[e.jsx(f,{when:n.size<a,children:e.jsx(O,{onClick:()=>l?.(N.SELECT_ALL),children:"Seleccionar todo"})}),e.jsx(f,{when:n.size>0,children:e.jsx(O,{onClick:()=>l?.(N.CLEAR_ALL),children:"Limpiar selección"})}),e.jsxs(f,{when:n.size>0&&n.size<a,children:[e.jsx(O,{onClick:()=>l?.(N.INVERT_SELECTION),children:"Invertir selección"}),e.jsx(O,{onClick:()=>l?.(N.CHOOSE_SELECTION),children:"Solo seleccionados"})]})]}),e.jsx(W,{}),e.jsx(Xs,{columns:j,onToggleColumn:h=>l?.(N.TOGGLE_COLUMN_PREFIX+h)}),e.jsx(W,{}),e.jsxs(ie,{children:[e.jsxs(O,{onClick:()=>l?.(N.NEW),children:[e.jsx(ze,{})," Insertar..."]}),e.jsxs(O,{disabled:n.size===0,onClick:()=>l?.(N.DELETE),children:[e.jsx(Re,{})," Borrar"]}),e.jsxs(O,{disabled:n.size!==1,onClick:()=>l?.(N.EDIT),children:[e.jsx(Ie,{})," Modificar..."]})]}),e.jsx(W,{}),e.jsxs(ie,{children:[e.jsx("div",{className:"text-center text-xs font-semibold uppercase text-muted-foreground",children:"Paginación"}),e.jsx(O,{className:"flex items-center p-2 gap-1",children:[5,10,25,50,100].map(h=>e.jsx(O,{onSelect:()=>l?.(N.PAGE_SIZE_PREFIX+h),className:R("inline-block w-10 text-center text-sm border border-gray-300","focus:z-10 focus:outline-none focus:ring-0 focus:ring-blue-500 focus:border-blue-500","bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 hover:!bg-blue-600",{"bg-gray-800 dark:bg-gray-400 text-white hover:!bg-blue-600":y===h}),children:h},h))})]}),e.jsxs(f,{when:u&&u.length>0,children:[e.jsx(W,{}),u.map(h=>e.jsx(f,{when:h.key!=Pe,fallback:e.jsx(W,{}),children:e.jsxs(O,{onSelect:()=>h.onClick?h.onClick():l(h.key),disabled:h.enabledWhen?!h.enabledWhen(n):!1,children:[h.icon," ",h.label]},h.key)}))]})]})]})}function Oe(a,n){const l=i.useRef(void 0),y=i.useCallback((...u)=>{l.current&&clearTimeout(l.current),l.current=window.setTimeout(()=>{a(...u)},n)},[a,n]);return i.useEffect(()=>()=>{l.current!==null&&clearTimeout(l.current)},[]),y}function Zs({columnLabel:a,values:n,selected:l,term:y,toggleValue:u,hideValues:j=!1}){const[h,_]=i.useState(!1),x=i.useRef(null),[S,A]=i.useState(y);i.useEffect(()=>A(y),[y]);const G=Oe(c=>{u("",c)},300),b=i.useCallback(c=>{const M=c.target.value;A(M),G(M)},[G]),I=i.useCallback(c=>u(c,S),[S,u]),T=i.useMemo(()=>{const c=S.trim().toLowerCase(),M=n.filter(g=>{const E=g.toLowerCase();return E.includes(c)||l.includes(E)});return M.sort((g,E)=>{const o=l.includes(g.toLowerCase()),p=l.includes(E.toLowerCase());return o===p?0:o?-1:1}),M},[n,S,l]),v=S.length+l.length>0;return e.jsxs(Te,{open:h,modal:!1,onOpenChange:c=>{_(c),c&&setTimeout(()=>x.current?.focus(),0)},children:[e.jsx(_e,{asChild:!0,children:e.jsxs(C,{type:"button",variant:"ghost",size:"icon",className:"relative size-4 mt-1 rounded-none hover:bg-muted",onClick:c=>c.stopPropagation(),children:[e.jsx(De,{className:"size-4"}),e.jsx(f,{when:v,children:e.jsx("span",{className:"absolute left-3 -top-[2px] block h-2 w-2 rounded-sm bg-yellow-400"})})]})}),e.jsx(Me,{className:"p-1",align:"end",side:"bottom",sideOffset:10,children:e.jsxs("div",{className:"flex flex-col items-start gap-2 p-2",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"w-full flex py-1 text-sm border-b gap-1",children:[e.jsx("div",{className:"flex-1",children:a}),e.jsx(f,{when:v,children:e.jsxs(C,{className:"flex items-center gap-1 px-1 py-0 text-xs h-auto",size:"sm",variant:"secondary",onClick:()=>{A(""),u("~~~~","")},children:[e.jsx(Gs,{className:"size-3"})," Limpiar"]})}),e.jsx(C,{className:"flex items-center gap-1 px-1 py-0 text-xs h-auto",size:"sm",variant:"secondary",onClick:()=>_(!1),children:e.jsx(os,{className:"size-3"})})]}),e.jsx("span",{className:"w-full text-sm",children:"Buscar"}),e.jsx($,{ref:x,type:"text",value:S,onChange:b,className:"border rounded px-2 py-1 w-full bg-background","data-radix-collection-item":!1,onKeyDown:c=>c.stopPropagation(),onClick:c=>c.stopPropagation()}),e.jsxs(f,{when:!j,children:[e.jsxs("div",{className:"flex text-sm w-full",children:[e.jsx("span",{className:"flex-1",children:"Valores"}),e.jsx(f,{when:l.length>0,children:e.jsxs("span",{className:"flex text-xs rounded-lg",children:[l.length,"/",n.length]})})]}),e.jsx("div",{className:"w-full h-44 overflow-auto p-2 border rounded","data-radix-collection-item":!1,onKeyDown:c=>c.stopPropagation(),onClick:c=>c.stopPropagation(),children:T.map(c=>{const M=(c||"").trim().toLowerCase();return!M||c==="null"?null:e.jsx(Ee,{checked:l.includes(M),onCheckedChange:()=>I(c),onSelect:g=>g.preventDefault(),className:"cursor-pointer",children:c},c)})})]})]})})]})}function Ys({size:a="md",title:n,description:l,children:y,footer:u,open:j,onOpenChange:h,className:_}){const x=a==="fullscreen"?"h-screen":"h-[80vh] max-h-[85vh]";return e.jsx(is,{open:j,onOpenChange:h,children:e.jsxs(cs,{className:`
          ${ds[a]} 
          ${x} 
          flex flex-col p-0 gap-0 overflow-hidden
          ${_}
        `,children:[(n||l)&&e.jsxs(hs,{className:"flex-shrink-0 border-b p-4",children:[n&&e.jsx(us,{children:n}),l&&e.jsx(gs,{children:l})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:y}),u&&e.jsx(xs,{className:"flex-shrink-0 border-t p-4",children:u})]})})}function Js({data:a,columns:n,onFilterChange:l,onClose:y,onApply:u}){const[j,h]=i.useState(""),[_,x]=i.useState("contains"),[S,A]=i.useState(Object.fromEntries(n.map(o=>[o.key,!0]))),[G,b]=i.useState(""),I=Oe(o=>{h(o)},500),T=o=>{b(o),I(o)},v=o=>{A(p=>({...p,[o]:!p[o]}))},c=(o,p)=>{const L=ve(o),q=ve(p);switch(_){case"starts":return L.startsWith(q);case"ends":return L.endsWith(q);case"exact":return o===p;default:return L.includes(q)}},M=i.useCallback((o,p)=>{if(o.accessor)return typeof o.accessor=="function"?o.accessor(p):F(p,o.accessor);if(o.map&&typeof o.map=="function"){const L=F(p,o.key);return o.map(L)}return F(p,o.key)},[]),g=i.useMemo(()=>j.trim()?a.filter(o=>n.some(p=>S[p.key]&&c(String(M(p,o)),j))):[],[j,S,_,a]),E=i.useMemo(()=>{if(!j.trim())return{};const o={};return n.forEach(p=>{S[p.key]&&(o[p.key]=a.filter(L=>c(String(M(p,L)),j)).length)}),o},[j,S,_,a]);return i.useEffect(()=>{l&&l(g)},[g,l]),e.jsx(Ys,{open:!0,onOpenChange:o=>{o||y()},size:"lg",className:"h-[440px]",title:"Búsqueda global",description:"",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(C,{onClick:()=>{y()},className:"px-4 py-2",children:"Cerrar"}),e.jsx(C,{onClick:()=>u(),className:"px-4 py-2",disabled:g.length===0,children:"Aceptar"})]}),children:e.jsxs("div",{className:"p-6",children:[e.jsx($,{type:"text",placeholder:"Escribe para buscar...",value:G,onChange:o=>T(o.target.value),className:"w-full p-3 mb-4"}),e.jsxs("select",{value:_,onChange:o=>x(o.target.value),className:"mb-4 p-2 w-full rounded-lg border",children:[e.jsx("option",{value:"contains",children:"Contiene"}),e.jsx("option",{value:"starts",children:"Empieza por"}),e.jsx("option",{value:"ends",children:"Termina con"}),e.jsx("option",{value:"exact",children:"Valor exacto"})]}),e.jsx("div",{className:"flex flex-wrap gap-4 mb-4 rounded-lg border p-2",children:n.map(o=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx($,{type:"checkbox",checked:S[o.key],onChange:()=>v(o.key),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"",children:o.title}),e.jsx(f,{when:E[o.key]>0,children:e.jsxs("span",{className:"text-xs text-gray-500",children:["(",E[o.key],")"]})})]},o.key))}),e.jsxs("p",{className:"mb-4 rounded-lg border p-2",children:[g.length," registro",g.length!==1?"s":""]})]})})}function Se(a,n){return[...new Set(a.map(l=>String(l[n])))]}function re(a,n){if(a.accessor)return typeof a.accessor=="function"?a.accessor(n):F(n,a.accessor);if(a.map&&typeof a.map=="function"){const l=F(n,a.key);return a.map(l)}return F(n,a.key)}function Qs(a,n){return a.resolver?typeof a.resolver=="function"?a.resolver(n):typeof a.resolver=="string"?a.resolver.includes(".")?F(n,a.resolver):n[a.resolver]:null:re(a,n)||""}const et=ms.memo(function({rows:n,cols:l}){return e.jsx(e.Fragment,{children:Array.from({length:n}).map((y,u)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-1",children:e.jsx("div",{className:"h-11 rounded-sm animate-pulse bg-gray-300 dark:bg-blue-950/30 flex items-center justify-center",children:e.jsx($,{type:"checkbox",className:"size-4",disabled:!0})})}),Array.from({length:l}).map((j,h)=>e.jsx("td",{className:"px-1",children:e.jsx("div",{className:"h-11 rounded-sm animate-pulse bg-gray-300 dark:bg-blue-950/30"})},`skeleton-${u}-${h}`))]},`skeleton-${u}`))})}),st=({id:a="paged-table",entity:n="Items",dataSource:l,initialPageSize:y=10,columns:u,enableDoubleClickEdit:j,actionHandlers:h,buttons:_=[],waitingForRows:x=!1})=>{const S=`${a}.columns`,A=`${a}.PageSize`,{showQuestion:G}=de,[b,I]=i.useState(l??[]),[T,v]=i.useState(1),[c,M]=i.useState(()=>y),[g,E]=i.useState(new Set),[o,p]=i.useState([]),[L,q]=i.useState(null),[H,he]=i.useState(null),[Y,ue]=i.useState([]),[Ae,ge]=i.useState(!1),[U,ae]=i.useState(()=>u.reduce((s,t)=>(s[t.key]={text:"",term:"",values:[]},s),{})),V=i.useRef(null),X=i.useRef(null),xe=i.useRef(null),J=i.useCallback(()=>{ae(u.reduce((s,t)=>(s[t.key]={text:"",term:"",values:[]},s),{}))},[u]);i.useEffect(()=>{const s=xe.current;(!s||s!=l)&&(I(l??[]),E(new Set),v(1),J(),xe.current=l)},[l,J]),i.useEffect(()=>{const s=K.readValue(A,10);M(s);const t=K.readValue(S,[]);if(t.length>0&&t.length==u.length)p(t);else{const r=u.map(d=>({key:d.key,label:d.title,visible:!0}));p(r),K.writeValue(S,r)}},[]);const Ve=s=>{p(t=>{const r=t.map(d=>d.key===s?{...d,visible:!d.visible}:d);return K.writeValue(S,r),r})},B=i.useMemo(()=>u.filter(s=>o.some(t=>t.key===s.key&&t.visible)),[u,o]),Fe=(s,t)=>{ae(r=>({...r,[s]:{...r[s],text:t.toLocaleLowerCase(),term:t}}))},$e=(s,t)=>{const r=t.toLowerCase(),d=r==="~~~~";ae(k=>{const w=k[s].values,m=w.includes(r);return{...k,[s]:{...k[s],values:m?w.filter(te=>te!==r):d?[]:[...w,r],...d?{text:"",term:""}:{}}}})},Q=i.useMemo(()=>Object.values(U).some(s=>s.text?.trim()||s.values&&s.values.length>0),[U]),P=i.useMemo(()=>{if(Y.length>0){const s=new Set(Y.map(t=>t.id));return b.filter(t=>s.has(t.id))}return Q?b.filter(s=>B.every(t=>{const r=U[t.key],d=r&&r.text,k=r&&r.values&&r.values.length>0;if(!r&&!d&&!k)return!0;const w=re(t,s),m=w==null?"":String(w).toLowerCase();return!(d&&!m.includes(d)||r.values.length>0&&!r.values.some(le=>le.toLowerCase()===m))})):b},[b,B,U,Q,Y]),ee=i.useMemo(()=>{if(!L||!H)return P;const s=u.find(d=>d.key===L);if(!s||!s.sorter)return P;let t;return typeof s.sorter=="function"?t=s.sorter:t=(d,k)=>{const w=re(s,d),m=re(s,k);return w==null&&m==null?0:w==null?-1:m==null?1:typeof w=="string"&&typeof m=="string"?ce(w,m):w<m?-1:w>m?1:0},[...P].sort((d,k)=>H==="asc"?t(d,k):t(k,d))},[L,H,P,u]),Ge=s=>{L===s?he(t=>t==="asc"?"desc":t==="desc"?null:"asc"):(q(s),he("asc")),v(1)},D=Math.max(1,Math.ceil(ee.length/c)),pe=T*c,Ue=pe-c,se=ee.slice(Ue,pe),fe=()=>v(1),Be=()=>v(s=>Math.max(s-1,1)),We=()=>v(s=>Math.min(s+1,D)),qe=()=>v(D),He=s=>{const t=~~s.target.value;t>=1&&t<=D&&v(t)},Xe=s=>{M(s),K.writeValue(A,s),v(1)};i.useEffect(()=>{T>D&&D>0?v(D):T===0&&D>0&&v(1)},[b,D,T]);const Ke=(s,t)=>{E(r=>{const d=new Set(r);return t?d.add(s):d.delete(s),d})},ne=s=>{if(s){const t=new Set(ee.map(r=>r.id));E(t)}else E(new Set)},Ze=()=>{E(s=>{const t=new Set;return ee.forEach(r=>{s.has(r.id)||t.add(r.id)}),t})},Ye=()=>{I(s=>s.filter(t=>g.has(t.id))),v(1)},be=s=>{if(s.length){const t=new Set(s.map(r=>r.id));I(r=>r.filter(d=>t.has(d.id))),v(1)}ue([]),ge(!1)},me=()=>{h?.onCreate?.(s=>{if(s){I(r=>[...r,s]);const t=Math.ceil((b.length+1)/c);T!==t&&v(t)}})},ye=async()=>{if(g.size===0)return;const s=`¿Está seguro de eliminar permanentemente ${g.size} registro(s) seleccionado(s)?`;G(s,{title:"Eliminar elementos",onAccept:()=>{const t=Array.from(g.keys());h?.onDelete?.(t,()=>{I(r=>r.filter(d=>!g.has(d.id))),E(new Set)})},acceptLabel:"Sí",closeLabel:"No"})},ke=()=>{if(g.size!==1)return;const s=g.values().next().value,t=b.find(r=>r.id===s);t&&h?.onEdit?.(t,r=>{const d={...t,...r};I(k=>k.map(w=>w.id===s?d:w))})},Je=()=>{E(new Set),h?.onCustomAction?.(Le.reload),fe()},Qe=(s,t,r)=>{const d=s.ctrlKey||s.metaKey,k=s.shiftKey;if(s.preventDefault(),V.current){clearTimeout(V.current),V.current=null;return}V.current=setTimeout(()=>{E(w=>{const m=new Set(w);if(k&&X.current!==null){const te=Math.min(X.current,t),le=Math.max(X.current,t);for(let oe=te;oe<=le;oe++)m.add(se[oe].id)}else d?(m.has(r)?m.delete(r):m.add(r),X.current=t):(m.has(r)&&m.size===1?m.clear():(m.clear(),m.add(r)),X.current=t);return m}),V.current=null},200)},es=s=>{V.current&&(clearTimeout(V.current),V.current=null),j&&h?.onEdit?.(s,t=>{const r={...s,...t};I(d=>d.map(k=>k.id===s.id?r:k))})},je=s=>{s==N.SELECT_ALL?ne(!0):s==N.CLEAR_ALL?ne(!1):s==N.INVERT_SELECTION?Ze():s==N.CHOOSE_SELECTION?Ye():s==N.NEW?me():s==N.DELETE?ye():s==N.EDIT?ke():s.startsWith(N.PAGE_SIZE_PREFIX)?Xe(~~s.split("-")[2]):s.startsWith(N.TOGGLE_COLUMN_PREFIX)?Ve(s.split("-")[2]):h?.onCustomAction?.(s,g)},ss=()=>{ge(s=>!s)},ts=i.useMemo(()=>u.reduce((t,r)=>{if(r.map){const d=Se(b,r.key);return t[r.key]=d.map(k=>r.map(~~k)).sort(ce),t}return t[r.key]=Se(b,r.key).sort(ce),t},{}),[b,u]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap mt-1 border-b-1 pt-1 pb-1 mb-1 ",children:[e.jsx("div",{className:"flex items-center gap-1 mt-2",children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:"truncate",children:[e.jsxs(f,{when:b.length==0,children:[n,": No hay registros"]}),e.jsxs(f,{when:b.length>0,children:[n,": ",b.length," elemento/s",P.length!==b.length&&` (${P.length} filtrado/s)`,g.size>0&&` (${g.size} seleccionado/s)`," - Página"," ",e.jsxs("span",{className:"",children:[T," / ",D]})]})]})})}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[e.jsx(C,{className:R("px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",{"!bg-gray-200 dark:!bg-blue-800":x}),variant:"outline",title:"Cargar",onClick:Je,children:e.jsx(As,{className:x?"animate-spin":""})}),e.jsx(C,{variant:"outline",onClick:()=>ss(),className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(ps,{})}),e.jsx(C,{variant:"outline",onClick:()=>J(),disabled:!Q,className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(Is,{})}),e.jsx(C,{variant:"outline",title:"Insertar",onClick:me,className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(ze,{})}),e.jsx(C,{variant:"outline",title:"Eliminar",onClick:ye,disabled:g.size===0,className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(Re,{})}),e.jsx(C,{variant:"outline",title:"Editar",onClick:ke,disabled:g.size!==1,className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(Ie,{})}),_.map((s,t)=>e.jsx(f,{when:s.show!="menu",children:e.jsxs(C,{variant:"outline",onClick:()=>s.onClick?s.onClick():je(s.key),className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",disabled:s.enabledWhen?!s.enabledWhen(g):!1,children:[e.jsx(f,{when:!!s.icon,children:s.icon}),e.jsx(f,{when:!s.icon,children:s.label})]},`vis-${t}`)}))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{variant:"outline",onClick:fe,disabled:T===1,className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(Ms,{})}),e.jsx(C,{variant:"outline",onClick:Be,disabled:T===1,className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(Ss,{})}),e.jsx($,{className:"w-12 text-center p-2 text-smº border-gray-200",value:T,min:"1",max:D,onChange:He,disabled:D<=1}),e.jsx(C,{variant:"outline",onClick:We,disabled:T===D,className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(fs,{})}),e.jsx(C,{variant:"outline",onClick:qe,disabled:T===D,className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(Ds,{})}),e.jsx(Ks,{itemsCount:P.length,selected:g,onAction:je,pageSize:c,menuItems:_.filter(s=>s.show==="menu"||s.show==="both"),columns:o})]})]}),e.jsx(f,{when:Ae,children:e.jsx(Js,{data:b,columns:B.map(s=>s),onFilterChange:s=>{Q&&J(),ue(s)},onClose:()=>be([]),onApply:()=>be(Y)})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ws,{className:"table-auto min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx(qs,{className:"",children:e.jsxs(we,{children:[e.jsx(Ne,{className:"w-0 py-3 bg-gray-500 dark:bg-blue-900",children:e.jsx($,{type:"checkbox",className:"size-4 mt-1",onChange:s=>ne(s.target.checked),checked:g.size===P.length&&P.length>0,ref:s=>{s&&(s.indeterminate=g.size>0&&g.size<P.length)}})}),B.map(s=>e.jsx(Ne,{onClick:()=>s.sorter&&Ge(s.key),className:R("min-w-[30px]","py-3 bg-gray-500 text-white dark:bg-blue-900 dark:text-gray-300",s.className??"",{"cursor-pointer dark:hover:bg-blue-950 hover:bg-gray-700":b.length&&s.sorter}),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.title,e.jsxs("div",{className:"inline-block ml-2",children:[e.jsx(f,{when:L===s.key&&b.length>0,children:e.jsxs("span",{className:R("inline-block translate-y-[3px]"),children:[e.jsx(f,{when:H==="asc",children:e.jsx(Ts,{className:"ml-1 text-white",style:{height:"20px",width:"20px"}})}),e.jsx(f,{when:H==="desc",children:e.jsx(bs,{className:"ml-1 text-white",style:{height:"20px",width:"20px"}})})]})}),e.jsx(f,{when:b.length>0&&s.hideSeachButton!=!0,children:e.jsx(Zs,{columnLabel:s.title,values:ts[s.key]||[],term:U[s.key].term,selected:U[s.key].values,toggleValue:(t,r)=>{t&&$e(s.key,t),Fe(s.key,r)},hideValues:s.hideValueSelection===!0},"f"+s.key)})]})]})},s.key))]})}),e.jsxs(Hs,{children:[e.jsx(f,{when:x,children:e.jsx(et,{rows:c,cols:B.length})}),e.jsx(f,{when:se&&se.length>0&&!x,children:se.map((s,t)=>e.jsxs(we,{className:"even:bg-gray-200 odd:bg-white dark:odd:bg-black dark:even:bg-gray-950 data-[state=selected]:bg-blue-100 dark:data-[state=selected]:bg-blue-800","data-state":g.has(s.id)?"selected":void 0,onClick:r=>Qe(r,t,s.id),onDoubleClick:()=>es(s),children:[e.jsx(Ce,{className:"w-0",children:e.jsx($,{type:"checkbox",className:"size-4",checked:g.has(s.id),onClick:r=>r.stopPropagation(),onChange:r=>Ke(s.id,r.target.checked)})}),B.map(r=>e.jsx(Ce,{className:R("",r.className??""),children:Qs(r,s)},`${s.id}-${String(r.key)}`))]},s.id))})]})]})})]})},Z=de.showSuccess,tt=de.showError,rt=[{title:"Id",key:"id",sorter:"id",className:"w-[20px]",hideValueSelection:!0},{title:"Nombre",key:"name",resolver:"name",sorter:"name",className:"",hideValueSelection:!0},{title:"Capital",key:"capital",sorter:"capital",className:"w-[180px]",hideValueSelection:!0},{title:"Región",key:"region",sorter:"region",className:"w-[160px]",hideValueSelection:!1},{title:"Población",key:"population",resolver:a=>js(a.population),sorter:"population",className:"w-[60px] text-right",hideValueSelection:!0},{title:"Cod",key:"cca2",sorter:"cca2",className:"w-[20px]",hideValueSelection:!0},{title:"Bandera",key:"flag",resolver:a=>e.jsx("div",{className:"p-1",children:e.jsx("img",{className:"rounded-xl",src:a.flag})}),className:"w-[60px]",hideSeachButton:!0}];function ct(){const[a,n]=i.useState(!1),[l,y]=i.useState(),{t:u}=ys();async function j(){n(!0);const x=await ws();if(n(!1),typeof x=="string"){tt(x);return}y(x.data)}i.useEffect(()=>{j()},[]);const h={onCreate:()=>Z("onCreate"),onEdit:x=>Z(JSON.stringify(x),"onEdit"),onDelete:x=>Z("onDelete: "+x.toString(),"onDelete"),onCustomAction:async x=>{x===Le.reload?await j():Z(x)}},_=[{label:"Ver perfil del usuario",key:"view-profile",onClick:()=>Z("Perfil de usuario"),icon:e.jsx(Bs,{}),show:"both",enabledWhen:x=>x.size==1},{label:"",key:Pe,show:"menu"},{label:"Exportar",key:"menu-export",show:"menu",enabledWhen:x=>x.size>=1}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col min-h-screen bg-background dark:bg-background",children:[e.jsx(ks,{}),e.jsxs("main",{className:"flex-1 max-w-5xl mx-auto w-full p-4",children:[e.jsx(Ns,{title:u("home.cards.pagedTable.title"),imageUrl:"https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&w=800&q=80"}),e.jsx(st,{id:"country-table",entity:"País",dataSource:l||[],waitingForRows:a,columns:rt,actionHandlers:h,buttons:_})]}),e.jsx(vs,{})]})})}export{ct as default};
